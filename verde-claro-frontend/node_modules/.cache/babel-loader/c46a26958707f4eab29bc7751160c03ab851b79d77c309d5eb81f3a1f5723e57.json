{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  id: \"department\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"alert alert-dismissible alert-warning mt-3\"\n}, [/*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"m-0\"\n}, \"Registro de Departamentos\")], -1 /* HOISTED */);\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-md-4\"\n})], -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"table table-hover\"\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", {\n  class: \"table-active\"\n}, [/*#__PURE__*/_createElementVNode(\"td\", null, \"Codigo\"), /*#__PURE__*/_createElementVNode(\"td\", null, \"Nombre\"), /*#__PURE__*/_createElementVNode(\"td\", null, \"Estado\"), /*#__PURE__*/_createElementVNode(\"td\", null, \"Editar\"), /*#__PURE__*/_createElementVNode(\"td\", null, \"Eliminar\")])], -1 /* HOISTED */);\nconst _hoisted_9 = {\n  id: \"dataResult\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"form\", _hoisted_2, [_createElementVNode(\"fieldset\", null, [_hoisted_3, _createCommentVNode(\" Datos de entarada del formulario \"), _hoisted_4, _createCommentVNode(\" Botones \"), _createElementVNode(\"div\", null, [_hoisted_5, _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-outline-success\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.dataAdd())\n  }, \"Agregar\"), _createTextVNode(\"   \"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-outline-warning\",\n    onClick: _cache[1] || (_cache[1] = $event => $options.dataUpdate())\n  }, \"Modificar\")])])]), _createCommentVNode(\" Registros \"), _createElementVNode(\"div\", null, [_hoisted_6, _createElementVNode(\"table\", _hoisted_7, [_hoisted_8, _createElementVNode(\"tbody\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.listData, item => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: item.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(item.codigo), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.nombre), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.estado == true ? 'Activo' : 'Inactivo'), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.findByid(item.id)\n    }, \"➤\", 8 /* PROPS */, _hoisted_10)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.deleteById(item.id)\n    }, \"➤\", 8 /* PROPS */, _hoisted_11)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]);\n}","map":{"version":3,"mappings":";;EACSA,KAAK,EAAC;AAAW;;EACZC,EAAE,EAAC;AAAY;gCAEbC,oBAEM;EAFDF,KAAK,EAAC;AAA4C,iBACnDE,oBAA4C;EAAzCF,KAAK,EAAC;AAAK,GAAC,2BAAyB;gCAG5CE,oBAKM;EALDF,KAAK,EAAC;AAAK,iBACZE,oBAEM;EAFDF,KAAK,EAAC;AAAU;gCAQrBE,oBAAI;gCAUZA,oBAAI;;EACGF,KAAK,EAAC;AAAmB;gCAC5BE,oBAQQ,6BAPJA,oBAMK;EANDF,KAAK,EAAC;AAAc,iBACpBE,oBAAe,YAAX,QAAM,gBACVA,oBAAe,YAAX,QAAM,gBACVA,oBAAe,YAAX,QAAM,gBACVA,oBAAe,YAAX,QAAM,gBACVA,oBAAiB,YAAb,UAAQ;;EAGbD,EAAE,EAAC;AAAY;;;;uBArClCE,oBAgDM,OAhDNC,UAgDM,GA/CFF,oBAqBO,QArBPG,UAqBO,GApBHH,oBAmBW,mBAlBPI,UAEM,EACNC,yDAAyC,EACzCC,UAKM,EAEND,gCAAgB,EAChBL,oBAKM,cAJFO,UAAI,EACJP,oBAAyF;IAAjFQ,IAAI,EAAC,QAAQ;IAACV,KAAK,EAAC,yBAAyB;IAAEW,OAAK,sCAAEC,gBAAO;KAAI,SAAO,oBAAS,KAEzF,uBAA8F;IAAtFF,IAAI,EAAC,QAAQ;IAACV,KAAK,EAAC,yBAAyB;IAAEW,OAAK,sCAAEC,mBAAU;KAAI,WAAS,SAKjGL,kCAAkB,EAClBL,oBAsBM,cArBFW,UAAI,EACJX,oBAmBQ,SAnBRY,UAmBQ,GAlBJC,UAQQ,EACRb,oBAQQ,SARRc,UAQQ,sBAPJb,oBAMKc,6BANcC,cAAQ,EAAhBC,IAAI;yBAAfhB,oBAMK;MANyBiB,GAAG,EAAED,IAAI,CAAClB;QACpCC,oBAA0B,6BAAnBiB,IAAI,CAACE,MAAM,kBAClBnB,oBAA0B,6BAAnBiB,IAAI,CAACG,MAAM,kBAClBpB,oBAA0D,6BAAnDiB,IAAI,CAACI,MAAM,kDAClBrB,oBAAsD,aAAlDA,oBAA6C;MAApCS,OAAK,YAAEC,iBAAQ,CAACO,IAAI,CAAClB,EAAE;OAAG,GAAC,iCACxCC,oBAAwD,aAApDA,oBAA+C;MAAtCS,OAAK,YAAEC,mBAAU,CAACO,IAAI,CAAClB,EAAE;OAAG,GAAC","names":["class","id","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createCommentVNode","_hoisted_4","_hoisted_5","type","onClick","$options","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","$data","item","key","codigo","nombre","estado"],"sourceRoot":"","sources":["D:\\MisionTIC_2022\\unab_web_application_development\\verde-claro-frontend\\src\\views\\parameter\\DepartmentView.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <form id=\"department\">\r\n            <fieldset>\r\n                <div class=\"alert alert-dismissible alert-warning mt-3\">\r\n                    <p class=\"m-0\">Registro de Departamentos</p>\r\n                </div>\r\n                <!-- Datos de entarada del formulario -->\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-4\">\r\n\r\n                    </div>\r\n                    \r\n                </div>\r\n\r\n                <!-- Botones -->\r\n                <div>\r\n                    <br>\r\n                    <button type=\"button\" class=\"btn btn-outline-success\" @click=\"dataAdd()\">Agregar</button>\r\n                    &nbsp;\r\n                    <button type=\"button\" class=\"btn btn-outline-warning\" @click=\"dataUpdate()\">Modificar</button>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n\r\n        <!-- Registros -->\r\n        <div>\r\n            <br>\r\n            <table class=\"table table-hover\">\r\n                <thead>\r\n                    <tr class=\"table-active\">\r\n                        <td>Codigo</td>\r\n                        <td>Nombre</td>\r\n                        <td>Estado</td>\r\n                        <td>Editar</td>\r\n                        <td>Eliminar</td>\r\n                    </tr>\r\n                </thead>\r\n                <tbody id=\"dataResult\">\r\n                    <tr v-for=\"item in listData\" :key=\"item.id\">\r\n                        <td>{{ item.codigo }}</td>\r\n                        <td>{{ item.nombre }}</td>\r\n                        <td>{{ item.estado == true ? 'Activo' : 'Inactivo' }}</td>\r\n                        <td><button @click=\"findByid(item.id)\">➤</button></td>\r\n                        <td><button @click=\"deleteById(item.id)\">➤</button></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport Swal from 'sweetalert2'\r\n\r\nexport default {\r\n    name: 'DepartmentView',\r\n\r\n    data() {\r\n        return {\r\n            id: 0,\r\n            codigo: '',\r\n            nombre: '',\r\n            estado: '',\r\n            listData: [],\r\n            listValidar: []\r\n        }\r\n    },\r\n    created() {\r\n        this.loadData();\r\n    },\r\n    methods: {\r\n        loadData: function () {\r\n            axios.get('http://132.145.204.101:8180/api/departments').then(result => {\r\n                this.listData = result.data\r\n            })\r\n            axios.get('http://132.145.204.101:8180/api/cities').then(result => {\r\n                this.listValidar = result.data\r\n            })\r\n        },\r\n        findByid: function (id) {\r\n            // metodo para consutlar por el ig del boton impreso en la vista\r\n            axios.get('http://132.145.204.101:8180/api/departments/' + id).then(result => {\r\n                this.id = result.data.id;\r\n                this.codigo = result.data.codigo;\r\n                this.nombre = result.data.nombre;\r\n                this.estado = (result.data.estado == true ? 1 : 0);\r\n            })\r\n        },\r\n        deleteById: function (id) {\r\n            // metodo para eliminar el registro por ID\r\n            var bandera = this.validarReferencia(id);\r\n            if (bandera == true) {\r\n                Swal.fire({\r\n                    title: 'Esta usted seguro de eliminar?',\r\n                    text: \"No pordrá revertir los cambios!\",\r\n                    icon: 'Advertencia',\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: '#3085d6',\r\n                    cancelButtonColor: '#d33',\r\n                    confirmButtonText: 'Si, borrar!'\r\n                }).then((result) => {\r\n                    if (result.isConfirmed) {\r\n                        axios.delete('http://132.145.204.101:8180/api/departments/' + id).then(() => {\r\n                            Swal.fire({\r\n                                icon: 'success',\r\n                                title: \"'El registro se eliminó de forma correcta.'\",\r\n                                showConfirmButton: false,\r\n                                timer: 1500\r\n                            });\r\n                            this.loadData();\r\n                        })\r\n                    }\r\n                })\r\n            } else {\r\n                Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Oops...',\r\n                    text: 'Error, registro tiene asociado un permiso al rol.'\r\n                })\r\n            }\r\n        },\r\n        dataAdd: function () {\r\n            let data = {\r\n                codigo: this.codigo,\r\n                nombre: this.nombre,\r\n                estado: parseInt(this.estado)\r\n            };\r\n            axios.post('http://132.145.204.101:8180/api/departments', data).then(result => {\r\n                if (result.data) {\r\n                    Swal.fire({\r\n                        icon: 'success',\r\n                        title: \"'El registro se guardó de forma correcta.'\",\r\n                        showConfirmButton: false,\r\n                        timer: 1500\r\n                    });\r\n                    this.loadData();\r\n                    this.clearList();\r\n                }\r\n            });\r\n\r\n        },\r\n        dataUpdate: function () {\r\n            let data = {\r\n                id: this.id,\r\n                codigo: this.codigo,\r\n                nombre: this.nombre,\r\n                estado: parseInt(this.estado)\r\n            };\r\n            axios.put('http://132.145.204.101:8180/api/departments/' + this.id, data).then(result => {\r\n                if (result.data) {\r\n                    Swal.fire({\r\n                        icon: 'success',\r\n                        title: \"'El registro se guardó de forma correcta.'\",\r\n                        showConfirmButton: false,\r\n                        timer: 1500\r\n                    });\r\n                    this.loadData();\r\n                    this.clearList();\r\n                }\r\n            });\r\n\r\n        },\r\n        validarReferencia: function (id) {\r\n            var bandera = true;\r\n\r\n            this.listValidar.forEach((item, index) => {\r\n                if (item.departmentId.id == id) {\r\n                    bandera = false\r\n                }\r\n                console.log(index)\r\n            })\r\n            return bandera;\r\n\r\n        },\r\n        clearList: function () {\r\n            this.id = 0,\r\n                this.codigo = '',\r\n                this.nombre = '',\r\n                this.estado = '',\r\n                this.listData = []\r\n        }\r\n    }\r\n}\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}