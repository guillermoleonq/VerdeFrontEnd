{"ast":null,"code":"import axios from 'axios';\nimport Swal from 'sweetalert2';\nexport default {\n  name: 'DepartmentView',\n  data() {\n    return {\n      id: 0,\n      codigo: '',\n      nombre: '',\n      estado: '',\n      listData: [],\n      listValidar: []\n    };\n  },\n  created() {\n    this.loadData();\n  },\n  methods: {\n    loadData: function () {\n      axios.get('http://132.145.204.101:8180/api/productos').then(result => {\n        this.listData = result.data;\n      });\n      axios.get('http://132.145.204.101:8180/api/cities').then(result => {\n        this.listValidar = result.data;\n      });\n    },\n    findByid: function (id) {\n      // metodo para consutlar por el ig del boton impreso en la vista\n      axios.get('http://132.145.204.101:8180/api/departments/' + id).then(result => {\n        this.id = result.data.id;\n        this.codigo = result.data.codigo;\n        this.nombre = result.data.nombre;\n        this.estado = result.data.estado == true ? 1 : 0;\n      });\n    },\n    deleteById: function (id) {\n      // metodo para eliminar el registro por ID\n      var bandera = this.validarReferencia(id);\n      if (bandera == true) {\n        Swal.fire({\n          title: 'Esta usted seguro de eliminar?',\n          text: \"No pordrá revertir los cambios!\",\n          icon: 'Advertencia',\n          showCancelButton: true,\n          confirmButtonColor: '#3085d6',\n          cancelButtonColor: '#d33',\n          confirmButtonText: 'Si, borrar!'\n        }).then(result => {\n          if (result.isConfirmed) {\n            axios.delete('http://132.145.204.101:8180/api/departments/' + id).then(() => {\n              Swal.fire({\n                icon: 'success',\n                title: \"'El registro se eliminó de forma correcta.'\",\n                showConfirmButton: false,\n                timer: 1500\n              });\n              this.loadData();\n            });\n          }\n        });\n      } else {\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'Error, registro tiene asociado un permiso al rol.'\n        });\n      }\n    },\n    dataAdd: function () {\n      let data = {\n        codigo: this.codigo,\n        nombre: this.nombre,\n        estado: parseInt(this.estado)\n      };\n      axios.post('http://132.145.204.101:8180/api/departments', data).then(result => {\n        if (result.data) {\n          Swal.fire({\n            icon: 'success',\n            title: \"'El registro se guardó de forma correcta.'\",\n            showConfirmButton: false,\n            timer: 1500\n          });\n          this.loadData();\n          this.clearList();\n        }\n      });\n    },\n    dataUpdate: function () {\n      let data = {\n        id: this.id,\n        codigo: this.codigo,\n        nombre: this.nombre,\n        estado: parseInt(this.estado)\n      };\n      axios.put('http://132.145.204.101:8180/api/departments/' + this.id, data).then(result => {\n        if (result.data) {\n          Swal.fire({\n            icon: 'success',\n            title: \"'El registro se guardó de forma correcta.'\",\n            showConfirmButton: false,\n            timer: 1500\n          });\n          this.loadData();\n          this.clearList();\n        }\n      });\n    },\n    validarReferencia: function (id) {\n      var bandera = true;\n      this.listValidar.forEach((item, index) => {\n        if (item.departmentId.id == id) {\n          bandera = false;\n        }\n        console.log(index);\n      });\n      return bandera;\n    },\n    clearList: function () {\n      this.id = 0, this.codigo = '', this.nombre = '', this.estado = '', this.listData = [];\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","Swal","name","data","id","codigo","nombre","estado","listData","listValidar","created","loadData","methods","get","then","result","findByid","deleteById","bandera","validarReferencia","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","isConfirmed","delete","showConfirmButton","timer","dataAdd","parseInt","post","clearList","dataUpdate","put","forEach","item","index","departmentId","console","log"],"sourceRoot":"","sources":["D:\\MisionTIC_2022\\unab_web_application_development\\VerdeClaroFE\\verde-claro-frontend\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\r\n  <div class=\"home\">\r\n    <img alt=\"Vue logo\" src=\"../assets/logo.png\">\r\n    <HelloWorld msg=\"Welcome to Your Vue.js App\" />\r\n  </div>\r\n\r\n\r\n  <table class=\"table table-hover\">\r\n    <thead class=\"text-center\">\r\n      <tr class=\"table-active\">\r\n        <td>Codigo</td>\r\n        <td>Nombre</td>\r\n        <td>Estado</td>\r\n        <td>Acciones</td>\r\n      </tr>\r\n    </thead>\r\n    <tbody id=\"dataResult\">\r\n      <tr v-for=\"item in listData\" :key=\"item.id\">\r\n        <td>{{ item.codigo }}</td>\r\n        <td>{{ item.nombre }}</td>\r\n        <td>{{ item.estado == true ? 'Activo' : 'Inactivo' }}</td>\r\n        <td class=\"text-center\">\r\n          <i class=\"fa fa-pencil-square actions text-warning me-1\" @click=\"findByid(item.id)\"></i>\r\n          <i class=\"fa fa-trash-o actions text-danger ms-1\" @click=\"findByid(item.id)\"></i>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport Swal from 'sweetalert2'\r\n\r\nexport default {\r\n  name: 'DepartmentView',\r\n\r\n  data() {\r\n    return {\r\n      id: 0,\r\n      codigo: '',\r\n      nombre: '',\r\n      estado: '',\r\n      listData: [],\r\n      listValidar: []\r\n    }\r\n  },\r\n  created() {\r\n    this.loadData();\r\n  },\r\n  methods: {\r\n    loadData: function () {\r\n      axios.get('http://132.145.204.101:8180/api/productos').then(result => {\r\n        this.listData = result.data\r\n      })\r\n      axios.get('http://132.145.204.101:8180/api/cities').then(result => {\r\n        this.listValidar = result.data\r\n      })\r\n    },\r\n    findByid: function (id) {\r\n      // metodo para consutlar por el ig del boton impreso en la vista\r\n      axios.get('http://132.145.204.101:8180/api/departments/' + id).then(result => {\r\n        this.id = result.data.id;\r\n        this.codigo = result.data.codigo;\r\n        this.nombre = result.data.nombre;\r\n        this.estado = (result.data.estado == true ? 1 : 0);\r\n      })\r\n    },\r\n    deleteById: function (id) {\r\n      // metodo para eliminar el registro por ID\r\n      var bandera = this.validarReferencia(id);\r\n      if (bandera == true) {\r\n        Swal.fire({\r\n          title: 'Esta usted seguro de eliminar?',\r\n          text: \"No pordrá revertir los cambios!\",\r\n          icon: 'Advertencia',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#3085d6',\r\n          cancelButtonColor: '#d33',\r\n          confirmButtonText: 'Si, borrar!'\r\n        }).then((result) => {\r\n          if (result.isConfirmed) {\r\n            axios.delete('http://132.145.204.101:8180/api/departments/' + id).then(() => {\r\n              Swal.fire({\r\n                icon: 'success',\r\n                title: \"'El registro se eliminó de forma correcta.'\",\r\n                showConfirmButton: false,\r\n                timer: 1500\r\n              });\r\n              this.loadData();\r\n            })\r\n          }\r\n        })\r\n      } else {\r\n        Swal.fire({\r\n          icon: 'error',\r\n          title: 'Oops...',\r\n          text: 'Error, registro tiene asociado un permiso al rol.'\r\n        })\r\n      }\r\n    },\r\n    dataAdd: function () {\r\n      let data = {\r\n        codigo: this.codigo,\r\n        nombre: this.nombre,\r\n        estado: parseInt(this.estado)\r\n      };\r\n      axios.post('http://132.145.204.101:8180/api/departments', data).then(result => {\r\n        if (result.data) {\r\n          Swal.fire({\r\n            icon: 'success',\r\n            title: \"'El registro se guardó de forma correcta.'\",\r\n            showConfirmButton: false,\r\n            timer: 1500\r\n          });\r\n          this.loadData();\r\n          this.clearList();\r\n        }\r\n      });\r\n\r\n    },\r\n    dataUpdate: function () {\r\n      let data = {\r\n        id: this.id,\r\n        codigo: this.codigo,\r\n        nombre: this.nombre,\r\n        estado: parseInt(this.estado)\r\n      };\r\n      axios.put('http://132.145.204.101:8180/api/departments/' + this.id, data).then(result => {\r\n        if (result.data) {\r\n          Swal.fire({\r\n            icon: 'success',\r\n            title: \"'El registro se guardó de forma correcta.'\",\r\n            showConfirmButton: false,\r\n            timer: 1500\r\n          });\r\n          this.loadData();\r\n          this.clearList();\r\n        }\r\n      });\r\n\r\n    },\r\n    validarReferencia: function (id) {\r\n      var bandera = true;\r\n\r\n      this.listValidar.forEach((item, index) => {\r\n        if (item.departmentId.id == id) {\r\n          bandera = false\r\n        }\r\n        console.log(index)\r\n      })\r\n      return bandera;\r\n\r\n    },\r\n    clearList: function () {\r\n      this.id = 0,\r\n        this.codigo = '',\r\n        this.nombre = '',\r\n        this.estado = '',\r\n        this.listData = []\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}